<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    
    <title>Using Sockets &#8212; INET Documentation  documentation</title>

    <link rel="stylesheet" href="../_static/material-icons.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/notosanscjkjp.css" type="text/css" />
    <link rel="stylesheet" href="../_static/roboto.css" type="text/css" />
    <link rel="stylesheet" href="../_static/material-design-lite-1.3.0/material.blue-light_blue.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/sphinx_materialdesign_theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/inet_theme.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/sphinx_materialdesign_theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Testing" href="ch-testing.html" />
    <link rel="prev" title="Working with Packets" href="ch-packets.html" /> 
  </head>
<body>
    <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header mdl-layout--fixed-drawer"><header class="mdl-layout__header  ">
    <div class="mdl-layout__header-row">
        
        <nav class="mdl-navigation breadcrumb">
            <a class="mdl-navigation__link" href="index.html">Developer’s Guide</a><i class="material-icons">navigate_next</i>
            <a class="mdl-navigation__link is-active">Using Sockets</a>
        </nav>
        <div class="mdl-layout-spacer"></div>
        <nav class="mdl-navigation">
        
<form class="form-inline pull-sm-right" action="../search.html" method="get">
      <div class="mdl-textfield mdl-js-textfield mdl-textfield--expandable mdl-textfield--floating-label mdl-textfield--align-right">
        <label id="quick-search-icon" class="mdl-button mdl-js-button mdl-button--icon"  for="waterfall-exp">
            <i class="material-icons">search</i>
        </label>
        <div class="mdl-textfield__expandable-holder">
          <input class="mdl-textfield__input" type="text" name="q"  id="waterfall-exp" placeholder="Search" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </div>
      </div>
      <div class="mdl-tooltip" data-mdl-for="quick-search-icon">
      Quick search
      </div>
</form>
        
<a id="button-show-source"
    class="mdl-button mdl-js-button mdl-button--icon"
    href="../_sources/developers-guide/ch-sockets.rst.txt" rel="nofollow">
<i class="material-icons">code</i>
</a>
<div class="mdl-tooltip" data-mdl-for="button-show-source">
Show Source
</div>
        </nav>
    </div>
</header><header class="mdl-layout__drawer">
    
    
      <div class="globaltoc">
        <span class="mdl-layout-title toc">Table Of Contents</span>
        
        
            
            <nav class="mdl-navigation">
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../showcases/index.html">Showcases</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../showcases/general/index.html">Generic</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../showcases/general/pcaprecording/doc/index.html">PCAP Recording</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/general/diffserv/doc/index.html">Differentiated Services</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../showcases/mobility/index.html">Mobility</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../showcases/mobility/basic/doc/index.html">Mobility Models</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/mobility/combining/doc/index.html">Combining Mobility Models</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/mobility/spatial/doc/index.html">3D Mobility</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../showcases/routing/index.html">Routing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../showcases/routing/manet/doc/index.html">MANET Routing Protocols</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../showcases/visualizer/index.html">Visualization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../showcases/visualizer/packetdrop/doc/index.html">Visualizing Packet Drops</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/visualizer/transportpathactivity/doc/index.html">Visualizing Transport Path Activity</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/visualizer/networkpathactivity/doc/index.html">Visualizing Network Path Activity</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/visualizer/datalinkactivity/doc/index.html">Visualizing Data Link Activity</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/visualizer/physicallinkactivity/doc/index.html">Visualizing Physical Link Activity</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/visualizer/radiomediumactivity/doc/index.html">Visualizing Radio Medium Activity</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/visualizer/routingtable/doc/index.html">Visualizing Routing Tables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/visualizer/interfacetable/doc/index.html">Displaying IP Addresses and Other Interface Information</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/visualizer/ieee80211/doc/index.html">Visualizing IEEE 802.11 Network Membership</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/visualizer/transportconnection/doc/index.html">Visualizing Transport Connections</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/visualizer/networknode/doc/index.html">Visualizing Network Nodes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/visualizer/environment/doc/index.html">Visualizing the Physical Environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/visualizer/mobility/doc/index.html">Visualizing Node Mobility</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/visualizer/earth/doc/index.html">Visualizing Terrain and Urban Environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/visualizer/instrumentfigures/doc/index.html">Instrument Figures</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/visualizer/styling/doc/index.html">Styling and Appearance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/visualizer/submoduleinfo/doc/index.html">Visualizing Submodule Information</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/visualizer/statistic/doc/index.html">Visualizing Statistics</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../showcases/wireless/index.html">Wireless</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../showcases/wireless/pathloss/doc/index.html">Path Loss Models</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/wireless/directionalantennas/doc/index.html">Modeling Directional Antennas</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/wireless/sensornetwork/doc/index.html">MAC Protocols for Wireless Sensor Networks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/wireless/ieee802154/doc/index.html">IEEE 802.15.4 Smart Home</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/wireless/power/doc/index.html">Power Consumption</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/wireless/throughput/doc/index.html">IEEE 802.11 Throughput</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/wireless/errorrate/doc/index.html">Packet Loss vs. Distance Using Various WiFi Bitrates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/wireless/hiddennode/doc/index.html">The Hidden Node Problem</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/wireless/handover/doc/index.html">IEEE 802.11 Handover</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/wireless/ratecontrol/doc/index.html">IEEE 802.11 Rate Control</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/wireless/multiradio/doc/index.html">Multiple Wireless Interfaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/wireless/fragmentation/doc/index.html">IEEE 802.11 Fragmentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/wireless/qos/doc/index.html">IEEE 802.11 Quality of Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/wireless/blockack/doc/index.html">IEEE 802.11 Block Acknowledgment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/wireless/aggregation/doc/index.html">IEEE 802.11 Frame Aggregation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/wireless/txop/doc/index.html">IEEE 802.11 Transmit Opportunity</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/wireless/doc/index.html">Wireless</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/wireless/doc/step1.html">Step 1. Two hosts communicating wirelessly</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/wireless/doc/step2.html">Step 2. Setting up some animations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/wireless/doc/step3.html">Step 3. Adding more nodes and decreasing the communication range</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/wireless/doc/step4.html">Step 4. Setting up static routing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/wireless/doc/step5.html">Step 5. Taking interference into account</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/wireless/doc/step6.html">Step 6. Using CSMA to better utilize the medium</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/wireless/doc/step7.html">Step 7. Turning on ACKs in CSMA</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/wireless/doc/step8.html">Step 8. Modeling energy consumption</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/wireless/doc/step9.html">Step 9. Configuring node movements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/wireless/doc/step10.html">Step 10. Configuring ad-hoc routing (AODV)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/wireless/doc/step11.html">Step 11. Adding obstacles to the environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/wireless/doc/step12.html">Step 12. Changing to a more realistic radio model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/wireless/doc/step13.html">Step 13. Configuring a more accurate path loss model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/wireless/doc/step14.html">Step 14. Introducing antenna gain</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/wireless/doc/conclusion.html">Conclusion</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/configurator/doc/index.html">IPv4 Network Configurator</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/configurator/doc/step1.html">Step 1. Fully automatic IP address assignment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/configurator/doc/step2.html">Step 2. Manually overriding individual IP addresses</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/configurator/doc/step3.html">Step 3. Automatically assigning IP addresses to a subnet from a given range</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/configurator/doc/step4.html">Step 4. Fully automatic static routing table configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/configurator/doc/step5.html">Step 5. Manually overriding individual routes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/configurator/doc/step6.html">Step 6. Setting different metric for automatic routing table configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/configurator/doc/step7.html">Step 7. Configuring a hierarchical network</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/configurator/doc/step8.html">Step 8. Configuring a mixed wired/wireless network</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/configurator/doc/step9.html">Step 9. Leaving some part of the network unconfigured</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/configurator/doc/step10.html">Step 10. Configuring a completely wireless network</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/configurator/doc/step11.html">Step 11. Manually modifying an automatically created configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/configurator/doc/step12.html">Step 12. Mixing different kinds of autorouting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/configurator/doc/conclusion.html">Conclusion</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../users-guide/index.html">User’s Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-usage.html">Using the INET Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-networks.html">Networks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-network-nodes.html">Network Nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-network-interfaces.html">Network Interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-apps.html">Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-transport.html">Transport Protocols</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-ipv4.html">The IPv4 Protocol Family</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-ipv6.html">IPv6 and Mobile IPv6</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-other-network-protocols.html">Other Network Protocols</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-routing.html">Internet Routing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-adhoc-routing.html">Ad Hoc Routing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-diffserv.html">Differentiated Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-mpls.html">The MPLS Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-ppp.html">Point-to-Point Links</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-ethernet.html">The Ethernet Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-80211.html">The 802.11 Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-802154.html">The 802.15.4 Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-sensor-macs.html">MAC Protocols for Wireless Sensor Networks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-physicallayer.html">The Physical Layer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-transmission-medium.html">The Transmission Medium</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-environment.html">The Physical Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-mobility.html">Node Mobility</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-power.html">Modeling Power Consumption</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-emulation.html">Network Emulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-network-autoconfig.html">Network Autoconfiguration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-scenario-scripting.html">Scenario Scripting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-lifecycle.html">Modeling Node Failures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-collecting-results.html">Collecting Results</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-visualization.html">Visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-instrument-figures.html">Instrument Figures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-authors-guide.html">Appendix: Author’s Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-history.html">History</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Developer’s Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="ch-introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="ch-packets.html">Working with Packets</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Using Sockets</a></li>
<li class="toctree-l2"><a class="reference internal" href="ch-testing.html">Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="ch-authors-guide.html">Appendix: Author’s Guide</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="https://omnetpp.org/doc/inet/api-current/neddoc/">NED Reference</a></li>
<li class="toctree-l1"><a class="reference external" href="https://inet.omnetpp.org">← Back to the INET Site</a></li>
</ul>

            </nav>
        
        </div>
    
</header>
        <main class="mdl-layout__content" tabIndex="0">
<header class="mdl-layout__drawer">
    
    
      <div class="globaltoc">
        <span class="mdl-layout-title toc">Table Of Contents</span>
        
        
            
            <nav class="mdl-navigation">
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../showcases/index.html">Showcases</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../showcases/general/index.html">Generic</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../showcases/general/pcaprecording/doc/index.html">PCAP Recording</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/general/diffserv/doc/index.html">Differentiated Services</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../showcases/mobility/index.html">Mobility</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../showcases/mobility/basic/doc/index.html">Mobility Models</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/mobility/combining/doc/index.html">Combining Mobility Models</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/mobility/spatial/doc/index.html">3D Mobility</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../showcases/routing/index.html">Routing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../showcases/routing/manet/doc/index.html">MANET Routing Protocols</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../showcases/visualizer/index.html">Visualization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../showcases/visualizer/packetdrop/doc/index.html">Visualizing Packet Drops</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/visualizer/transportpathactivity/doc/index.html">Visualizing Transport Path Activity</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/visualizer/networkpathactivity/doc/index.html">Visualizing Network Path Activity</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/visualizer/datalinkactivity/doc/index.html">Visualizing Data Link Activity</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/visualizer/physicallinkactivity/doc/index.html">Visualizing Physical Link Activity</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/visualizer/radiomediumactivity/doc/index.html">Visualizing Radio Medium Activity</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/visualizer/routingtable/doc/index.html">Visualizing Routing Tables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/visualizer/interfacetable/doc/index.html">Displaying IP Addresses and Other Interface Information</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/visualizer/ieee80211/doc/index.html">Visualizing IEEE 802.11 Network Membership</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/visualizer/transportconnection/doc/index.html">Visualizing Transport Connections</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/visualizer/networknode/doc/index.html">Visualizing Network Nodes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/visualizer/environment/doc/index.html">Visualizing the Physical Environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/visualizer/mobility/doc/index.html">Visualizing Node Mobility</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/visualizer/earth/doc/index.html">Visualizing Terrain and Urban Environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/visualizer/instrumentfigures/doc/index.html">Instrument Figures</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/visualizer/styling/doc/index.html">Styling and Appearance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/visualizer/submoduleinfo/doc/index.html">Visualizing Submodule Information</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/visualizer/statistic/doc/index.html">Visualizing Statistics</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../showcases/wireless/index.html">Wireless</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../showcases/wireless/pathloss/doc/index.html">Path Loss Models</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/wireless/directionalantennas/doc/index.html">Modeling Directional Antennas</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/wireless/sensornetwork/doc/index.html">MAC Protocols for Wireless Sensor Networks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/wireless/ieee802154/doc/index.html">IEEE 802.15.4 Smart Home</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/wireless/power/doc/index.html">Power Consumption</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/wireless/throughput/doc/index.html">IEEE 802.11 Throughput</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/wireless/errorrate/doc/index.html">Packet Loss vs. Distance Using Various WiFi Bitrates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/wireless/hiddennode/doc/index.html">The Hidden Node Problem</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/wireless/handover/doc/index.html">IEEE 802.11 Handover</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/wireless/ratecontrol/doc/index.html">IEEE 802.11 Rate Control</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/wireless/multiradio/doc/index.html">Multiple Wireless Interfaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/wireless/fragmentation/doc/index.html">IEEE 802.11 Fragmentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/wireless/qos/doc/index.html">IEEE 802.11 Quality of Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/wireless/blockack/doc/index.html">IEEE 802.11 Block Acknowledgment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/wireless/aggregation/doc/index.html">IEEE 802.11 Frame Aggregation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../showcases/wireless/txop/doc/index.html">IEEE 802.11 Transmit Opportunity</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/wireless/doc/index.html">Wireless</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/wireless/doc/step1.html">Step 1. Two hosts communicating wirelessly</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/wireless/doc/step2.html">Step 2. Setting up some animations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/wireless/doc/step3.html">Step 3. Adding more nodes and decreasing the communication range</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/wireless/doc/step4.html">Step 4. Setting up static routing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/wireless/doc/step5.html">Step 5. Taking interference into account</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/wireless/doc/step6.html">Step 6. Using CSMA to better utilize the medium</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/wireless/doc/step7.html">Step 7. Turning on ACKs in CSMA</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/wireless/doc/step8.html">Step 8. Modeling energy consumption</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/wireless/doc/step9.html">Step 9. Configuring node movements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/wireless/doc/step10.html">Step 10. Configuring ad-hoc routing (AODV)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/wireless/doc/step11.html">Step 11. Adding obstacles to the environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/wireless/doc/step12.html">Step 12. Changing to a more realistic radio model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/wireless/doc/step13.html">Step 13. Configuring a more accurate path loss model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/wireless/doc/step14.html">Step 14. Introducing antenna gain</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/wireless/doc/conclusion.html">Conclusion</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/configurator/doc/index.html">IPv4 Network Configurator</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/configurator/doc/step1.html">Step 1. Fully automatic IP address assignment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/configurator/doc/step2.html">Step 2. Manually overriding individual IP addresses</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/configurator/doc/step3.html">Step 3. Automatically assigning IP addresses to a subnet from a given range</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/configurator/doc/step4.html">Step 4. Fully automatic static routing table configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/configurator/doc/step5.html">Step 5. Manually overriding individual routes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/configurator/doc/step6.html">Step 6. Setting different metric for automatic routing table configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/configurator/doc/step7.html">Step 7. Configuring a hierarchical network</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/configurator/doc/step8.html">Step 8. Configuring a mixed wired/wireless network</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/configurator/doc/step9.html">Step 9. Leaving some part of the network unconfigured</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/configurator/doc/step10.html">Step 10. Configuring a completely wireless network</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/configurator/doc/step11.html">Step 11. Manually modifying an automatically created configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/configurator/doc/step12.html">Step 12. Mixing different kinds of autorouting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/configurator/doc/conclusion.html">Conclusion</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../users-guide/index.html">User’s Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-usage.html">Using the INET Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-networks.html">Networks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-network-nodes.html">Network Nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-network-interfaces.html">Network Interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-apps.html">Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-transport.html">Transport Protocols</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-ipv4.html">The IPv4 Protocol Family</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-ipv6.html">IPv6 and Mobile IPv6</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-other-network-protocols.html">Other Network Protocols</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-routing.html">Internet Routing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-adhoc-routing.html">Ad Hoc Routing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-diffserv.html">Differentiated Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-mpls.html">The MPLS Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-ppp.html">Point-to-Point Links</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-ethernet.html">The Ethernet Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-80211.html">The 802.11 Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-802154.html">The 802.15.4 Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-sensor-macs.html">MAC Protocols for Wireless Sensor Networks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-physicallayer.html">The Physical Layer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-transmission-medium.html">The Transmission Medium</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-environment.html">The Physical Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-mobility.html">Node Mobility</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-power.html">Modeling Power Consumption</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-emulation.html">Network Emulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-network-autoconfig.html">Network Autoconfiguration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-scenario-scripting.html">Scenario Scripting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-lifecycle.html">Modeling Node Failures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-collecting-results.html">Collecting Results</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-visualization.html">Visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-instrument-figures.html">Instrument Figures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-authors-guide.html">Appendix: Author’s Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../users-guide/ch-history.html">History</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Developer’s Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="ch-introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="ch-packets.html">Working with Packets</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Using Sockets</a></li>
<li class="toctree-l2"><a class="reference internal" href="ch-testing.html">Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="ch-authors-guide.html">Appendix: Author’s Guide</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="https://omnetpp.org/doc/inet/api-current/neddoc/">NED Reference</a></li>
<li class="toctree-l1"><a class="reference external" href="https://inet.omnetpp.org">← Back to the INET Site</a></li>
</ul>

            </nav>
        
        </div>
    
</header>

    <div class="document">
        <div class="page-content">
        
  <div class="section" id="using-sockets">
<span id="dg-cha-sockets"></span><h1>Using Sockets<a class="headerlink" href="#using-sockets" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<span id="dg-sec-sockets-overview"></span><h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>The INET Socket API provides special C++ abstractions on top of the
standard OMNeT++ message passing interface for several communication
protocols.</p>
<p>Sockets are most often used by applications and routing protocols to
acccess the corresponding protocol services. Sockets are capable of
communicating with the underlying protocol in a bidirectional way. They
can assemble and send service requests and packets, and they can also
receive service indications and packets.</p>
<p>Applications can simply call the socket class member functions (e.g.
<code class="code literal-cpp docutils literal notranslate"><span class="pre">bind()</span></code>, <code class="code literal-cpp docutils literal notranslate"><span class="pre">connect()</span></code>, <code class="code literal-cpp docutils literal notranslate"><span class="pre">send()</span></code>, <code class="code literal-cpp docutils literal notranslate"><span class="pre">close()</span></code>) to
create and configure sockets, and to send and receive packets. They may
also use several different sockets simulatenously.</p>
<p>The following sections first introduce the shared functionality of
sockets, and then list all INET sockets in detail, mostly by shedding
light on many common usages through examples.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Code fragments in this chapter have been somewhat simplified for brevity. For
example, some <code class="docutils literal notranslate"><span class="pre">virtual</span></code> modifiers and <code class="docutils literal notranslate"><span class="pre">override</span></code> qualifiers have been
omitted, and some algorithms have been simplified to ease understanding.</p>
</div>
<div class="section" id="socket-interfaces">
<h3>Socket Interfaces<a class="headerlink" href="#socket-interfaces" title="Permalink to this headline">¶</a></h3>
<p>Although sockets are always implemented as protocol specific C++
classes, INET also provides C++ socket interfaces. These interfaces
allow writing general C++ code which can handle many different kinds of
sockets all at once.</p>
<p>For example, the <code class="code literal-cpp docutils literal notranslate"><span class="pre">ISocket</span></code> interface is implemented by all sockets,
and the <code class="code literal-cpp docutils literal notranslate"><span class="pre">INetworkSocket</span></code> interface is implemented by all network
protocol sockets.</p>
</div>
<div class="section" id="identifying-sockets">
<h3>Identifying Sockets<a class="headerlink" href="#identifying-sockets" title="Permalink to this headline">¶</a></h3>
<p>All sockets have a socket identifier which is unique within the network
node. It is automatically assigned to the sockets when they are created.
The identifier can accessed with <code class="code literal-cpp docutils literal notranslate"><span class="pre">getSocketId()</span></code> throughout the
lifetime of the socket.</p>
<p>The socket identifier is also passed along in <code class="code literal-cpp docutils literal notranslate"><span class="pre">SocketReq</span></code> and
<code class="code literal-cpp docutils literal notranslate"><span class="pre">SocketInd</span></code> packet tags. These tags allow applications and
protocols to identify the socket to which <code class="code literal-cpp docutils literal notranslate"><span class="pre">Packet</span></code>’s, service
<code class="code literal-cpp docutils literal notranslate"><span class="pre">Request</span></code>’s, and service <code class="code literal-cpp docutils literal notranslate"><span class="pre">Indication</span></code>’s belong.</p>
</div>
<div class="section" id="configuring-sockets">
<h3>Configuring Sockets<a class="headerlink" href="#configuring-sockets" title="Permalink to this headline">¶</a></h3>
<p>Since all sockets work with message passing under the hoods, they must
be configured prior to use. In order to send packets and service
requests on the correct gate towards the underlying communication
protocol, the output gate must be configured:</p>
<div class="highlight-cpp notranslate" id="socket-configure-example"><div class="highlight"><pre><span></span><span class="n">socket</span><span class="p">.</span><span class="n">setOutputGate</span><span class="p">(</span><span class="n">gate</span><span class="p">(</span><span class="s">&quot;socketOut&quot;</span><span class="p">));</span> <span class="c1">// configure socket output gate</span>
<span class="n">socket</span><span class="p">.</span><span class="n">setCallback</span><span class="p">(</span><span class="k">this</span><span class="p">);</span> <span class="c1">// set callback interface for message processing</span>
</pre></div>
</div>
<p>In contrast, incoming messages such as service indications from the
underlying communication protocol can be received on any application
gate.</p>
<p>To ease application development, all sockets support storing a user
specified data object pointer. The pointer is accessible with the
<code class="code literal-cpp docutils literal notranslate"><span class="pre">setUserData()</span></code>, <code class="code literal-cpp docutils literal notranslate"><span class="pre">getUserData()</span></code> member functions.</p>
<p>Another mandatory configuration for all sockets is setting the socket
callback interface. The callback interface is covered in more detail in
the following section.</p>
<p>Other socket specific configuration options are also available, these
are discussed in the section of the corresponding socket.</p>
</div>
<div class="section" id="callback-interfaces">
<h3>Callback Interfaces<a class="headerlink" href="#callback-interfaces" title="Permalink to this headline">¶</a></h3>
<p>To ease centralized message processing, all sockets provide a callback
interface which must be implemented by applications. The callback
interface is usually called <code class="code literal-cpp docutils literal notranslate"><span class="pre">ICallback</span></code>, and it’s defined as an
inner class of the socket it belongs to. These interfaces often contain
some generic notification methods along with several socket specific
methods.</p>
<p>For example, the most common callback method is the one which processes
incoming packets:</p>
<div class="highlight-cpp notranslate" id="socket-callback-interface-example"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ICallback</span> <span class="c1">// usually the inner class of the socket</span>
<span class="p">{</span>
    <span class="kt">void</span> <span class="n">socketDataArrived</span><span class="p">(</span><span class="n">ISocket</span> <span class="o">*</span><span class="n">socket</span><span class="p">,</span> <span class="n">Packet</span> <span class="o">*</span><span class="n">packet</span><span class="p">);</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
<div class="section" id="processing-messages">
<h3>Processing Messages<a class="headerlink" href="#processing-messages" title="Permalink to this headline">¶</a></h3>
<p>In general, sockets can process all incoming messages which were sent by
the underlying protocol. The received messages must be processed by the
socket where they belong to.</p>
<p>For example, an application can simply go through each knonwn socket in
any order, and decide which one should process the received message as
follows:</p>
<div class="highlight-cpp notranslate" id="socket-process-example"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="n">socket</span><span class="p">.</span><span class="n">belongsToSocket</span><span class="p">(</span><span class="n">message</span><span class="p">))</span> <span class="c1">// match message and socket</span>
    <span class="n">socket</span><span class="p">.</span><span class="n">processMessage</span><span class="p">(</span><span class="n">message</span><span class="p">);</span> <span class="c1">// invoke callback interface</span>
</pre></div>
</div>
<p>Sockets usually deconstruct the received messages and update their state
accordingly if necessary. They also automatically dispatch received
packets and service indications for further processing to the
appropriate functions in the corresponding <code class="code literal-cpp docutils literal notranslate"><span class="pre">ICallback</span></code> interface.</p>
</div>
<div class="section" id="sending-data">
<h3>Sending Data<a class="headerlink" href="#sending-data" title="Permalink to this headline">¶</a></h3>
<p>All sockets provide one or more <code class="code literal-cpp docutils literal notranslate"><span class="pre">send()</span></code> functions which send
packets using the current configuration of the socket. The actual means
of packet delivery depends on the underlying communication protocol, but
in general the state of the socket is expected to affect it.</p>
<p>For example, after the socket is properly configured, the application
can start sending packets without attaching any tags, because the socket
takes care of the necessary technical details:</p>
<div class="highlight-cpp notranslate" id="socket-send-example"><div class="highlight"><pre><span></span><span class="n">socket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">packet</span><span class="p">);</span> <span class="c1">// by means of the underlying communication protocol</span>
</pre></div>
</div>
</div>
<div class="section" id="receiving-data">
<h3>Receiving Data<a class="headerlink" href="#receiving-data" title="Permalink to this headline">¶</a></h3>
<p>For example, the application may directly implement the <code class="code literal-cpp docutils literal notranslate"><span class="pre">ICallback</span></code>
interface of the socket and print the received data as follows:</p>
<div class="highlight-cpp notranslate" id="socket-receive-example"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">App</span> <span class="o">:</span> <span class="k">public</span> <span class="n">cSimpleModule</span><span class="p">,</span> <span class="k">public</span> <span class="n">ICallback</span>
<span class="p">{</span>
    <span class="kt">void</span> <span class="n">socketDataArrived</span><span class="p">(</span><span class="n">ISocket</span> <span class="o">*</span><span class="n">socket</span><span class="p">,</span> <span class="n">Packet</span> <span class="o">*</span><span class="n">packet</span><span class="p">);</span>
<span class="p">};</span>

<span class="kt">void</span> <span class="n">App</span><span class="o">::</span><span class="n">socketDataArrived</span><span class="p">(</span><span class="n">ISocket</span> <span class="o">*</span><span class="n">socket</span><span class="p">,</span> <span class="n">Packet</span> <span class="o">*</span><span class="n">packet</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">EV</span> <span class="o">&lt;&lt;</span> <span class="n">packet</span><span class="o">-&gt;</span><span class="n">peekData</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="closing-sockets">
<h3>Closing Sockets<a class="headerlink" href="#closing-sockets" title="Permalink to this headline">¶</a></h3>
<p>Sockets must be closed before deleting them. Closing a socket allows the
underlying communication protocol to release allocated resources. These
resources are often allocated on the local network node, the remote
nework node, or potentially somewhere else in the network.</p>
<p>For example, a socket for a connection oriented protocol must be closed
to release the allocated resources at the peer:</p>
<div class="highlight-cpp notranslate" id="socket-close-example"><div class="highlight"><pre><span></span><span class="n">socket</span><span class="p">.</span><span class="n">close</span><span class="p">();</span> <span class="c1">// release allocated local and remote network resources</span>
</pre></div>
</div>
</div>
<div class="section" id="using-multiple-sockets">
<h3>Using Multiple Sockets<a class="headerlink" href="#using-multiple-sockets" title="Permalink to this headline">¶</a></h3>
<p>If the application needs to manage a large number of sockets, for
example in a server application which handles multiple incoming
connections, the generic <code class="code literal-cpp docutils literal notranslate"><span class="pre">SocketMap</span></code> class may be useful. This
class can manage all kinds of sockets which implement the <code class="code literal-cpp docutils literal notranslate"><span class="pre">ISocket</span></code>
interface simultaneously.</p>
<p>For example, processing an incoming packet or service indication can be
done as follows:</p>
<div class="highlight-cpp notranslate" id="socket-find-example"><div class="highlight"><pre><span></span><span class="k">auto</span> <span class="n">socket</span> <span class="o">=</span> <span class="n">socketMap</span><span class="p">.</span><span class="n">findSocketFor</span><span class="p">(</span><span class="n">message</span><span class="p">);</span> <span class="c1">// lookup socket to process</span>
<span class="n">socket</span><span class="o">-&gt;</span><span class="n">processMessage</span><span class="p">(</span><span class="n">message</span><span class="p">);</span> <span class="c1">// dispatch message to callback interface</span>
</pre></div>
</div>
<p>In order for the <code class="code literal-cpp docutils literal notranslate"><span class="pre">SocketMap</span></code> to operate properly, sockets must be
added to and removed from it using the <code class="code literal-cpp docutils literal notranslate"><span class="pre">addSocket()</span></code> and
<code class="code literal-cpp docutils literal notranslate"><span class="pre">removeSocket()</span></code> methods respectively.</p>
</div>
</div>
<div class="section" id="udp-socket">
<span id="dg-sec-sockets-udp-socket"></span><h2>UDP Socket<a class="headerlink" href="#udp-socket" title="Permalink to this headline">¶</a></h2>
<p>The <code class="code literal-cpp docutils literal notranslate"><span class="pre">UdpSocket</span></code> class provides an easy to use C++ interface to send
and receive <span class="protocol">UDP</span> datagrams. The underlying <span class="protocol">UDP</span>
protocol is implemented in the <a class="reference-ned reference external" href="https://omnetpp.org/doc/inet/api-current/neddoc/inet.transportlayer.udp.Udp.html">Udp</a> module.</p>
<div class="section" id="callback-interface">
<h3>Callback Interface<a class="headerlink" href="#callback-interface" title="Permalink to this headline">¶</a></h3>
<p>Processing packets and indications which are received from the
<a class="reference-ned reference external" href="https://omnetpp.org/doc/inet/api-current/neddoc/inet.transportlayer.udp.Udp.html">Udp</a> module is pretty simple. The incoming message must be
processed by the socket where it belongs as shown in the general
section.</p>
<p>The <code class="code literal-cpp docutils literal notranslate"><span class="pre">UdpSocket</span></code> deconstructs the message and uses the
<code class="code literal-cpp docutils literal notranslate"><span class="pre">UdpSocket::ICallback</span></code> interface to notify the application about
received data and error indications:</p>
<div class="highlight-cpp notranslate" id="udp-socket-callback-interface"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ICallback</span> <span class="c1">// inner class of UdpSocket</span>
<span class="p">{</span>
    <span class="kt">void</span> <span class="n">socketDataArrived</span><span class="p">(</span><span class="n">UdpSocket</span> <span class="o">*</span><span class="n">socket</span><span class="p">,</span> <span class="n">Packet</span> <span class="o">*</span><span class="n">packet</span><span class="p">);</span>
    <span class="kt">void</span> <span class="nf">socketErrorArrived</span><span class="p">(</span><span class="n">UdpSocket</span> <span class="o">*</span><span class="n">socket</span><span class="p">,</span> <span class="n">Indication</span> <span class="o">*</span><span class="n">indication</span><span class="p">);</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
<div class="section" id="configuring-sockets-1">
<span id="id1"></span><h3>Configuring Sockets<a class="headerlink" href="#configuring-sockets-1" title="Permalink to this headline">¶</a></h3>
<p>For receiving <span class="protocol">UDP</span> datagrams on a socket, it must be bound to
an address and a port. Both the address and port is optional. If the
address is unspecified, than all <span class="protocol">UDP</span> datagrams with any
destination address are received. If the port is -1, then an unused port
is selected automatically by the <a class="reference-ned reference external" href="https://omnetpp.org/doc/inet/api-current/neddoc/inet.transportlayer.udp.Udp.html">Udp</a> module. The address and port
pair must be unique within the same network node.</p>
<p>Here is how to bind to a specific local address and port to receive
<span class="protocol">UDP</span> datagrams:</p>
<div class="highlight-cpp notranslate" id="udp-socket-bind-example"><div class="highlight"><pre><span></span><span class="n">socket</span><span class="p">.</span><span class="n">bind</span><span class="p">(</span><span class="n">Ipv4Address</span><span class="p">(</span><span class="s">&quot;10.0.0.42&quot;</span><span class="p">),</span> <span class="mi">42</span><span class="p">);</span> <span class="c1">// local address/port</span>
</pre></div>
</div>
<p>For only receiving <span class="protocol">UDP</span> datagrams from a specific remote
address/port, the socket can be connected to the desired remote
address/port:</p>
<div class="highlight-cpp notranslate" id="udp-socket-connect-example"><div class="highlight"><pre><span></span><span class="n">socket</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">Ipv4Address</span><span class="p">(</span><span class="s">&quot;10.0.0.42&quot;</span><span class="p">),</span> <span class="mi">42</span><span class="p">);</span> <span class="c1">// remote address/port</span>
</pre></div>
</div>
<p>There are several other socket options (e.g. receiving broadcasts,
managing multicast groups, setting type of service) which can also be
configured using the <code class="code literal-cpp docutils literal notranslate"><span class="pre">UdpSocket</span></code> class:</p>
<div class="highlight-cpp notranslate" id="udp-socket-configuration-example"><div class="highlight"><pre><span></span><span class="n">socket</span><span class="p">.</span><span class="n">setTimeToLive</span><span class="p">(</span><span class="mi">16</span><span class="p">);</span> <span class="c1">// change default TTL</span>
<span class="n">socket</span><span class="p">.</span><span class="n">setBroadcast</span><span class="p">(</span><span class="nb">true</span><span class="p">);</span> <span class="c1">// receive all broadcasts</span>
<span class="n">socket</span><span class="p">.</span><span class="n">joinMulticastGroup</span><span class="p">(</span><span class="n">Ipv4Address</span><span class="p">(</span><span class="s">&quot;224.0.0.9&quot;</span><span class="p">));</span> <span class="c1">// receive multicasts</span>
</pre></div>
</div>
</div>
<div class="section" id="sending-data-1">
<span id="id2"></span><h3>Sending Data<a class="headerlink" href="#sending-data-1" title="Permalink to this headline">¶</a></h3>
<p>After the socket has been configured, applications can send datagrams to
a remote address and port via a simple function call:</p>
<div class="highlight-cpp notranslate" id="udp-socket-sendto-example"><div class="highlight"><pre><span></span><span class="n">socket</span><span class="p">.</span><span class="n">sendTo</span><span class="p">(</span><span class="n">packet42</span><span class="p">,</span> <span class="n">Ipv4Address</span><span class="p">(</span><span class="s">&quot;10.0.0.42&quot;</span><span class="p">),</span> <span class="mi">42</span><span class="p">);</span> <span class="c1">// remote address/port</span>
</pre></div>
</div>
<p>If the application wants to send several datagrams, it can optionally
connect to the destination.</p>
<p>The <span class="protocol">UDP</span> protocol is in fact connectionless, so when the
<a class="reference-ned reference external" href="https://omnetpp.org/doc/inet/api-current/neddoc/inet.transportlayer.udp.Udp.html">Udp</a> module receives the connect request, it simply remembers the
remote address and port, and use it as default destination for later
sends.</p>
<div class="highlight-cpp notranslate" id="udp-socket-send-example"><div class="highlight"><pre><span></span><span class="n">socket</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">Ipv4Address</span><span class="p">(</span><span class="s">&quot;10.0.0.42&quot;</span><span class="p">),</span> <span class="mi">42</span><span class="p">);</span> <span class="c1">// remote address/port</span>
<span class="n">socket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">packet1</span><span class="p">);</span> <span class="c1">// send packets via connected socket</span>
<span class="c1">// ...</span>
<span class="n">socket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">packet42</span><span class="p">);</span>
</pre></div>
</div>
<p>The application can call connect several times on the same socket.</p>
</div>
<div class="section" id="receiving-data-1">
<span id="id3"></span><h3>Receiving Data<a class="headerlink" href="#receiving-data-1" title="Permalink to this headline">¶</a></h3>
<p>For example, the application may directly implement the
<code class="code literal-cpp docutils literal notranslate"><span class="pre">UdpSocket::ICallback</span></code> interface and print the received data as
follows:</p>
<div class="highlight-cpp notranslate" id="udp-socket-receive-example"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">UdpApp</span> <span class="o">:</span> <span class="k">public</span> <span class="n">cSimpleModule</span><span class="p">,</span> <span class="k">public</span> <span class="n">UdpSocket</span><span class="o">::</span><span class="n">ICallback</span>
<span class="p">{</span>
    <span class="kt">void</span> <span class="n">socketDataArrived</span><span class="p">(</span><span class="n">UdpSocket</span> <span class="o">*</span><span class="n">socket</span><span class="p">,</span> <span class="n">Packet</span> <span class="o">*</span><span class="n">packet</span><span class="p">);</span>
<span class="p">};</span>

<span class="kt">void</span> <span class="n">UdpApp</span><span class="o">::</span><span class="n">socketDataArrived</span><span class="p">(</span><span class="n">UdpSocket</span> <span class="o">*</span><span class="n">socket</span><span class="p">,</span> <span class="n">Packet</span> <span class="o">*</span><span class="n">packet</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">EV</span> <span class="o">&lt;&lt;</span> <span class="n">packet</span><span class="o">-&gt;</span><span class="n">peekData</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="tcp-socket">
<span id="dg-sec-sockets-tcp-socket"></span><h2>TCP Socket<a class="headerlink" href="#tcp-socket" title="Permalink to this headline">¶</a></h2>
<p>The <code class="code literal-cpp docutils literal notranslate"><span class="pre">TcpSocket</span></code> class provides an easy to use C++ interface to
manage <span class="protocol">TCP</span> connections, and to send and receive data. The
underlying <span class="protocol">TCP</span> protocol is implemented in the <a class="reference-ned reference external" href="https://omnetpp.org/doc/inet/api-current/neddoc/inet.transportlayer.tcp.Tcp.html">Tcp</a>,
<a class="reference-ned reference external" href="https://omnetpp.org/doc/inet/api-current/neddoc/inet.transportlayer.tcp_lwip.TcpLwip.html">TcpLwip</a>, and <a class="reference-ned reference external" href="https://omnetpp.org/doc/inet/api-current/neddoc/inet.transportlayer.tcp_nsc.TcpNsc.html">TcpNsc</a> modules.</p>
<div class="section" id="callback-interface-1">
<span id="id4"></span><h3>Callback Interface<a class="headerlink" href="#callback-interface-1" title="Permalink to this headline">¶</a></h3>
<p>Messages received from the various <a class="reference-ned reference external" href="https://omnetpp.org/doc/inet/api-current/neddoc/inet.transportlayer.tcp.Tcp.html">Tcp</a> modules can be processed
by the <code class="code literal-cpp docutils literal notranslate"><span class="pre">TcpSocket</span></code> where they belong to. The <code class="code literal-cpp docutils literal notranslate"><span class="pre">TcpSocket</span></code>
deconstructs the message and uses the <code class="code literal-cpp docutils literal notranslate"><span class="pre">TcpSocket::ICallback</span></code>
interface to notify the application about the received data or service
indication:</p>
<div class="highlight-cpp notranslate" id="tcp-socket-callback-interface"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ICallback</span> <span class="c1">// inner class of TcpSocket</span>
<span class="p">{</span>
    <span class="kt">void</span> <span class="n">socketDataArrived</span><span class="p">(</span><span class="n">TcpSocket</span><span class="o">*</span> <span class="n">socket</span><span class="p">,</span> <span class="n">Packet</span> <span class="o">*</span><span class="n">packet</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">urgent</span><span class="p">);</span>
    <span class="kt">void</span> <span class="nf">socketAvailable</span><span class="p">(</span><span class="n">TcpSocket</span> <span class="o">*</span><span class="n">socket</span><span class="p">,</span> <span class="n">TcpAvailableInfo</span> <span class="o">*</span><span class="n">info</span><span class="p">);</span>
    <span class="kt">void</span> <span class="nf">socketEstablished</span><span class="p">(</span><span class="n">TcpSocket</span> <span class="o">*</span><span class="n">socket</span><span class="p">);</span>
    <span class="c1">// ...</span>
    <span class="kt">void</span> <span class="nf">socketClosed</span><span class="p">(</span><span class="n">TcpSocket</span> <span class="o">*</span><span class="n">socket</span><span class="p">);</span>
    <span class="kt">void</span> <span class="nf">socketFailure</span><span class="p">(</span><span class="n">TcpSocket</span> <span class="o">*</span><span class="n">socket</span><span class="p">,</span> <span class="kt">int</span> <span class="n">code</span><span class="p">);</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
<div class="section" id="configuring-connections">
<h3>Configuring Connections<a class="headerlink" href="#configuring-connections" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference-ned reference external" href="https://omnetpp.org/doc/inet/api-current/neddoc/inet.transportlayer.tcp.Tcp.html">Tcp</a> module supports several <span class="protocol">TCP</span> different
congestion algorithms, which can also be configured using the
<code class="code literal-cpp docutils literal notranslate"><span class="pre">TcpSocket</span></code>:</p>
<div class="highlight-cpp notranslate" id="tcp-socket-configure-example"><div class="highlight"><pre><span></span><span class="n">socket</span><span class="p">.</span><span class="n">setTCPAlgorithmClass</span><span class="p">(</span><span class="s">&quot;TcpReno&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>Upon setting the individual parameters, the socket immediately sends
sevice requests to the underlying <a class="reference-ned reference external" href="https://omnetpp.org/doc/inet/api-current/neddoc/inet.transportlayer.tcp.Tcp.html">Tcp</a> protocol module.</p>
</div>
<div class="section" id="setting-up-connections">
<h3>Setting up Connections<a class="headerlink" href="#setting-up-connections" title="Permalink to this headline">¶</a></h3>
<p>Since <span class="protocol">TCP</span> is a connection oriented protocol, a connection
must be established before applications can exchange data. On the one
side, the application listens at a local address and port for incoming
<span class="protocol">TCP</span> connections:</p>
<div class="highlight-cpp notranslate" id="tcp-socket-listen-example"><div class="highlight"><pre><span></span><span class="n">socket</span><span class="p">.</span><span class="n">bind</span><span class="p">(</span><span class="n">Ipv4Address</span><span class="p">(</span><span class="s">&quot;10.0.0.42&quot;</span><span class="p">),</span> <span class="mi">42</span><span class="p">);</span> <span class="c1">// local address/port</span>
<span class="n">socket</span><span class="p">.</span><span class="n">listen</span><span class="p">();</span> <span class="c1">// start listening for incoming connections</span>
</pre></div>
</div>
<p>On the other side, the application connects to a remote address and port
to establish a new connection:</p>
<div class="highlight-cpp notranslate" id="tcp-socket-connect-example"><div class="highlight"><pre><span></span><span class="n">socket</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">Ipv4Address</span><span class="p">(</span><span class="s">&quot;10.0.0.42&quot;</span><span class="p">),</span> <span class="mi">42</span><span class="p">);</span> <span class="c1">// remote address/port</span>
</pre></div>
</div>
</div>
<div class="section" id="accepting-connections">
<h3>Accepting Connections<a class="headerlink" href="#accepting-connections" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference-ned reference external" href="https://omnetpp.org/doc/inet/api-current/neddoc/inet.transportlayer.tcp.Tcp.html">Tcp</a> module automatically notifies the <code class="code literal-cpp docutils literal notranslate"><span class="pre">TcpSocket</span></code> about
incoming connections. The socket in turn notifies the application using
the <code class="code literal-cpp docutils literal notranslate"><span class="pre">ICallback::socketAvailable</span></code> method of the callback interface.
Finally, incoming <span class="protocol">TCP</span> connections must be accepted by the
application before they can be used:</p>
<div class="highlight-cpp notranslate" id="tcp-socket-accept-example"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">TcpServerApp</span> <span class="o">:</span> <span class="k">public</span> <span class="n">cSimpleModule</span><span class="p">,</span> <span class="k">public</span> <span class="n">TcpSocket</span><span class="o">::</span><span class="n">ICallback</span>
<span class="p">{</span>
    <span class="n">TcpSocket</span> <span class="n">serverSocket</span><span class="p">;</span> <span class="c1">// server socket listening for connections</span>
    <span class="n">SocketMap</span> <span class="n">socketMap</span><span class="p">;</span> <span class="c1">// container for all accepted connections</span>

    <span class="kt">void</span> <span class="nf">socketAvailable</span><span class="p">(</span><span class="n">TcpSocket</span> <span class="o">*</span><span class="n">socket</span><span class="p">,</span> <span class="n">TcpAvailableInfo</span> <span class="o">*</span><span class="n">info</span><span class="p">);</span>
<span class="p">};</span>

<span class="kt">void</span> <span class="n">TcpServerApp</span><span class="o">::</span><span class="n">socketAvailable</span><span class="p">(</span><span class="n">TcpSocket</span> <span class="o">*</span><span class="n">socket</span><span class="p">,</span> <span class="n">TcpAvailableInfo</span> <span class="o">*</span><span class="n">info</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">auto</span> <span class="n">newSocket</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TcpSocket</span><span class="p">(</span><span class="n">info</span><span class="p">);</span> <span class="c1">// create socket using received info</span>
    <span class="c1">// ...</span>
    <span class="n">socketMap</span><span class="p">.</span><span class="n">addSocket</span><span class="p">(</span><span class="n">newSocket</span><span class="p">);</span> <span class="c1">// store accepted connection</span>
    <span class="n">serverSocket</span><span class="p">.</span><span class="n">accept</span><span class="p">(</span><span class="n">info</span><span class="o">-&gt;</span><span class="n">getNewSocketId</span><span class="p">());</span> <span class="c1">// notify Tcp module</span>
<span class="p">}</span>
</pre></div>
</div>
<p>After the connection is accepted, the <a class="reference-ned reference external" href="https://omnetpp.org/doc/inet/api-current/neddoc/inet.transportlayer.tcp.Tcp.html">Tcp</a> module notifies the
application about the socket being established and ready to be used.</p>
</div>
<div class="section" id="sending-data-2">
<span id="id5"></span><h3>Sending Data<a class="headerlink" href="#sending-data-2" title="Permalink to this headline">¶</a></h3>
<p>After the connection has been established, applications can send data to
the remote application via a simple function call:</p>
<div class="highlight-cpp notranslate" id="tcp-socket-send-example"><div class="highlight"><pre><span></span><span class="n">socket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">packet1</span><span class="p">);</span>
<span class="c1">// ...</span>
<span class="n">socket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">packet42</span><span class="p">);</span>
</pre></div>
</div>
<p>Packet data is enqueued by the local <a class="reference-ned reference external" href="https://omnetpp.org/doc/inet/api-current/neddoc/inet.transportlayer.tcp.Tcp.html">Tcp</a> module and transmitted
over time according to the protocol logic.</p>
</div>
<div class="section" id="receiving-data-2">
<span id="id6"></span><h3>Receiving Data<a class="headerlink" href="#receiving-data-2" title="Permalink to this headline">¶</a></h3>
<p>Receiving data is as simple as implementing the corresponding method of
the <code class="code literal-cpp docutils literal notranslate"><span class="pre">TcpSocket::ICallback</span></code> interface. One caveat is that packet
data may arrive in different chunk sizes (but the same order) than they
were sent due to the nature of <span class="protocol">TCP</span> protocol.</p>
<p>For example, the application may directly implement the
<code class="code literal-cpp docutils literal notranslate"><span class="pre">TcpSocket::ICallback</span></code> interface and print the received data as
follows:</p>
<div class="highlight-cpp notranslate" id="tcp-socket-receive-example"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">TcpApp</span> <span class="o">:</span> <span class="k">public</span> <span class="n">cSimpleModule</span><span class="p">,</span> <span class="k">public</span> <span class="n">TcpSocket</span><span class="o">::</span><span class="n">ICallback</span>
<span class="p">{</span>
    <span class="kt">void</span> <span class="n">socketDataArrived</span><span class="p">(</span><span class="n">TcpSocket</span> <span class="o">*</span><span class="n">socket</span><span class="p">,</span> <span class="n">Packet</span> <span class="o">*</span><span class="n">packet</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">urgent</span><span class="p">);</span>
<span class="p">};</span>

<span class="kt">void</span> <span class="n">TcpApp</span><span class="o">::</span><span class="n">socketDataArrived</span><span class="p">(</span><span class="n">TcpSocket</span> <span class="o">*</span><span class="n">socket</span><span class="p">,</span> <span class="n">Packet</span> <span class="o">*</span><span class="n">packet</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">urgent</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">EV</span> <span class="o">&lt;&lt;</span> <span class="n">packet</span><span class="o">-&gt;</span><span class="n">peekData</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="sctp-socket">
<span id="dg-sec-sockets-sctp-socket"></span><h2>SCTP Socket<a class="headerlink" href="#sctp-socket" title="Permalink to this headline">¶</a></h2>
<p>The <code class="code literal-cpp docutils literal notranslate"><span class="pre">SctpSocket</span></code> class provides an easy to use C++ interface to
manage <span class="protocol">SCTP</span> connections, and to send and receive data. The
underlying <span class="protocol">SCTP</span> protocol is implemented in the <a class="reference-ned reference external" href="https://omnetpp.org/doc/inet/api-current/neddoc/inet.transportlayer.sctp.Sctp.html">Sctp</a>
module.</p>
<div class="section" id="callback-interface-2">
<span id="id7"></span><h3>Callback Interface<a class="headerlink" href="#callback-interface-2" title="Permalink to this headline">¶</a></h3>
<p>Messages received from the <a class="reference-ned reference external" href="https://omnetpp.org/doc/inet/api-current/neddoc/inet.transportlayer.sctp.Sctp.html">Sctp</a> module can be processed by the
<code class="code literal-cpp docutils literal notranslate"><span class="pre">SctpSocket</span></code> where they belong to. The <code class="code literal-cpp docutils literal notranslate"><span class="pre">SctpSocket</span></code>
deconstructs the message and uses the <code class="code literal-cpp docutils literal notranslate"><span class="pre">SctpSocket::ICallback</span></code>
interface to notify the application about the received data or service
indication:</p>
<div class="highlight-cpp notranslate" id="sctp-socket-callback-interface"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ICallback</span> <span class="c1">// inner class of SctpSocket</span>
<span class="p">{</span>
    <span class="kt">void</span> <span class="n">socketDataArrived</span><span class="p">(</span><span class="n">SctpSocket</span><span class="o">*</span> <span class="n">socket</span><span class="p">,</span> <span class="n">Packet</span> <span class="o">*</span><span class="n">packet</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">urgent</span><span class="p">);</span>
    <span class="kt">void</span> <span class="nf">socketEstablished</span><span class="p">(</span><span class="n">SctpSocket</span> <span class="o">*</span><span class="n">socket</span><span class="p">);</span>
    <span class="c1">// ...</span>
    <span class="kt">void</span> <span class="nf">socketClosed</span><span class="p">(</span><span class="n">SctpSocket</span> <span class="o">*</span><span class="n">socket</span><span class="p">);</span>
    <span class="kt">void</span> <span class="nf">socketFailure</span><span class="p">(</span><span class="n">SctpSocket</span> <span class="o">*</span><span class="n">socket</span><span class="p">,</span> <span class="kt">int</span> <span class="n">code</span><span class="p">);</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
<div class="section" id="configuring-connections-1">
<span id="id8"></span><h3>Configuring Connections<a class="headerlink" href="#configuring-connections-1" title="Permalink to this headline">¶</a></h3>
<p>The <code class="code literal-cpp docutils literal notranslate"><span class="pre">SctpSocket</span></code> class supports setting several <span class="protocol">SCTP</span>
specific connection parameters directly:</p>
<div class="highlight-cpp notranslate" id="sctp-socket-configure-example"><div class="highlight"><pre><span></span><span class="n">socket</span><span class="p">.</span><span class="n">setOutboundStreams</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="n">socket</span><span class="p">.</span><span class="n">setStreamPriority</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="n">socket</span><span class="p">.</span><span class="n">setEnableHeartbeats</span><span class="p">(</span><span class="nb">true</span><span class="p">);</span>
<span class="c1">// ...</span>
</pre></div>
</div>
<p>Upon setting the individual parameters, the socket immediately sends
sevice requests to the underlying <a class="reference-ned reference external" href="https://omnetpp.org/doc/inet/api-current/neddoc/inet.transportlayer.sctp.Sctp.html">Sctp</a> protocol module.</p>
</div>
<div class="section" id="setting-up-connections-1">
<span id="id9"></span><h3>Setting up Connections<a class="headerlink" href="#setting-up-connections-1" title="Permalink to this headline">¶</a></h3>
<p>Since <span class="protocol">SCTP</span> is a connection oriented protocol, a connection
must be established before applications can exchange data. On the one
side, the application listens at a local address and port for incoming
<span class="protocol">SCTP</span> connections:</p>
<div class="highlight-cpp notranslate" id="sctp-socket-listen-example"><div class="highlight"><pre><span></span><span class="n">socket</span><span class="p">.</span><span class="n">bind</span><span class="p">(</span><span class="n">Ipv4Address</span><span class="p">(</span><span class="s">&quot;10.0.0.42&quot;</span><span class="p">),</span> <span class="mi">42</span><span class="p">);</span> <span class="c1">// local address/port</span>
<span class="n">socket</span><span class="p">.</span><span class="n">listen</span><span class="p">(</span><span class="nb">true</span><span class="p">);</span> <span class="c1">// start listening for incoming connections</span>
</pre></div>
</div>
<p>On the other side, the application connects to a remote address and port
to establish a new connection:</p>
<div class="highlight-cpp notranslate" id="sctp-socket-connect-example"><div class="highlight"><pre><span></span><span class="n">socket</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">Ipv4Address</span><span class="p">(</span><span class="s">&quot;10.0.0.42&quot;</span><span class="p">),</span> <span class="mi">42</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="accepting-connections-1">
<span id="id10"></span><h3>Accepting Connections<a class="headerlink" href="#accepting-connections-1" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference-ned reference external" href="https://omnetpp.org/doc/inet/api-current/neddoc/inet.transportlayer.sctp.Sctp.html">Sctp</a> module automatically notifies the <code class="code literal-cpp docutils literal notranslate"><span class="pre">SctpSocket</span></code>
about incoming connections. The socket in turn notifies the application
using the <code class="code literal-cpp docutils literal notranslate"><span class="pre">ICallback::socketAvailable</span></code> method of the callback
interface. Finally, incoming <span class="protocol">SCTP</span> connections must be
accepted by the application before they can be used:</p>
<div class="highlight-cpp notranslate" id="sctp-socket-accept-example"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">SctpServerApp</span> <span class="o">:</span> <span class="k">public</span> <span class="n">cSimpleModule</span><span class="p">,</span> <span class="k">public</span> <span class="n">SctpSocket</span><span class="o">::</span><span class="n">ICallback</span>
<span class="p">{</span>
    <span class="n">SocketMap</span> <span class="n">socketMap</span><span class="p">;</span>
    <span class="n">SctpSocket</span> <span class="n">serverSocket</span><span class="p">;</span>

    <span class="kt">void</span> <span class="nf">socketAvailable</span><span class="p">(</span><span class="n">SctpSocket</span> <span class="o">*</span><span class="n">socket</span><span class="p">,</span> <span class="n">SctpAvailableInfo</span> <span class="o">*</span><span class="n">info</span><span class="p">);</span>
<span class="p">};</span>

<span class="kt">void</span> <span class="n">SctpServerApp</span><span class="o">::</span><span class="n">socketAvailable</span><span class="p">(</span><span class="n">SctpSocket</span> <span class="o">*</span><span class="n">socket</span><span class="p">,</span> <span class="n">SctpAvailableInfo</span> <span class="o">*</span><span class="n">info</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">auto</span> <span class="n">newSocket</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SctpSocket</span><span class="p">(</span><span class="n">info</span><span class="p">);</span>
    <span class="c1">// ...</span>
    <span class="n">socketMap</span><span class="p">.</span><span class="n">addSocket</span><span class="p">(</span><span class="n">newSocket</span><span class="p">);</span>
    <span class="n">serverSocket</span><span class="p">.</span><span class="n">accept</span><span class="p">(</span><span class="n">info</span><span class="o">-&gt;</span><span class="n">getNewSocketId</span><span class="p">());</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="sending-data-3">
<span id="id11"></span><h3>Sending Data<a class="headerlink" href="#sending-data-3" title="Permalink to this headline">¶</a></h3>
<p>After the connection has been established, applications can send data to
the remote applica- tion via a simple function call:</p>
<div class="highlight-cpp notranslate" id="sctp-socket-send-example"><div class="highlight"><pre><span></span><span class="n">socket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">packet1</span><span class="p">);</span>
<span class="c1">// ...</span>
<span class="n">socket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">packet42</span><span class="p">);</span>
</pre></div>
</div>
<p>Packet data is enqueued by the local <a class="reference-ned reference external" href="https://omnetpp.org/doc/inet/api-current/neddoc/inet.transportlayer.sctp.Sctp.html">Sctp</a> module and transmitted
over time according to the protocol logic.</p>
</div>
<div class="section" id="receiving-data-3">
<span id="id12"></span><h3>Receiving Data<a class="headerlink" href="#receiving-data-3" title="Permalink to this headline">¶</a></h3>
<p>Receiving data is as simple as implementing the corresponding method of
the <code class="code literal-cpp docutils literal notranslate"><span class="pre">SctpSocket::ICallback</span></code> interface. One caveat is that packet
data may arrive in different chunk sizes (but the same order) than they
were sent due to the nature of <span class="protocol">SCTP</span> protocol.</p>
<p>For example, the application may directly implement the
<code class="code literal-cpp docutils literal notranslate"><span class="pre">SctpSocket::ICallback</span></code> interface and print the received data as
follows:</p>
<div class="highlight-cpp notranslate" id="sctp-socket-receive-example"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">SctpApp</span> <span class="o">:</span> <span class="k">public</span> <span class="n">cSimpleModule</span><span class="p">,</span> <span class="k">public</span> <span class="n">SctpSocket</span><span class="o">::</span><span class="n">ICallback</span>
<span class="p">{</span>
    <span class="kt">void</span> <span class="n">socketDataArrived</span><span class="p">(</span><span class="n">SctpSocket</span> <span class="o">*</span><span class="n">socket</span><span class="p">,</span> <span class="n">Packet</span> <span class="o">*</span><span class="n">packet</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">urgent</span><span class="p">);</span>
<span class="p">};</span>

<span class="kt">void</span> <span class="n">SctpApp</span><span class="o">::</span><span class="n">socketDataArrived</span><span class="p">(</span><span class="n">SctpSocket</span> <span class="o">*</span><span class="n">socket</span><span class="p">,</span> <span class="n">Packet</span> <span class="o">*</span><span class="n">packet</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">urgent</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">EV</span> <span class="o">&lt;&lt;</span> <span class="n">packet</span><span class="o">-&gt;</span><span class="n">peekData</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="ipv4-socket">
<span id="dg-sec-sockets-ipv4-socket"></span><h2>IPv4 Socket<a class="headerlink" href="#ipv4-socket" title="Permalink to this headline">¶</a></h2>
<p>The <code class="code literal-cpp docutils literal notranslate"><span class="pre">Ipv4Socket</span></code> class provides an easy to use C++ interface to
send and receive <span class="protocol">IPv4</span> datagrams. The underlying
<span class="protocol">IPv4</span> protocol is implemented in the <a class="reference-ned reference external" href="https://omnetpp.org/doc/inet/api-current/neddoc/inet.networklayer.ipv4.Ipv4.html">Ipv4</a> module.</p>
<div class="section" id="callback-interface-3">
<span id="id13"></span><h3>Callback Interface<a class="headerlink" href="#callback-interface-3" title="Permalink to this headline">¶</a></h3>
<p>Messages received from the <a class="reference-ned reference external" href="https://omnetpp.org/doc/inet/api-current/neddoc/inet.networklayer.ipv4.Ipv4.html">Ipv4</a> module must be processed by the
socket where they belong as shown in the general section. The
<code class="code literal-cpp docutils literal notranslate"><span class="pre">Ipv4Socket</span></code> deconstructs the message and uses the
<code class="code literal-cpp docutils literal notranslate"><span class="pre">Ipv4Socket::ICallback</span></code> interface to notify the application about
the received data:</p>
<div class="highlight-cpp notranslate" id="ipv4-socket-callback-interface"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ICallback</span> <span class="c1">// inner class of Ipv4Socket</span>
<span class="p">{</span>
    <span class="kt">void</span> <span class="n">socketDataArrived</span><span class="p">(</span><span class="n">Ipv4Socket</span> <span class="o">*</span><span class="n">socket</span><span class="p">,</span> <span class="n">Packet</span> <span class="o">*</span><span class="n">packet</span><span class="p">);</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
<div class="section" id="configuring-sockets-2">
<span id="id14"></span><h3>Configuring Sockets<a class="headerlink" href="#configuring-sockets-2" title="Permalink to this headline">¶</a></h3>
<p>In order to only receive <span class="protocol">IPv4</span> datagrams which are sent to a
specific local address or contain a specific protocol, the socket can be
bound to the desired local address or protocol.</p>
<p>For example, the following code fragment shows how the INET
<a class="reference-ned reference external" href="https://omnetpp.org/doc/inet/api-current/neddoc/inet.applications.pingapp.PingApp.html">PingApp</a> binds to the <span class="protocol">ICMPv4</span> protocol to receive all
incoming <span class="protocol">ICMPv4</span> Echo Reply messages:</p>
<div class="highlight-cpp notranslate" id="ipv4-socket-bind-example"><div class="highlight"><pre><span></span><span class="n">socket</span><span class="p">.</span><span class="n">bind</span><span class="p">(</span><span class="o">&amp;</span><span class="n">Protocol</span><span class="o">::</span><span class="n">icmpv4</span><span class="p">,</span> <span class="n">Ipv4Address</span><span class="p">());</span> <span class="c1">// filter for ICMPv4 messages</span>
</pre></div>
</div>
<p>For only receiving <span class="protocol">IPv4</span> datagrams from a specific remote
address, the socket can be connected to the desired remote address:</p>
<div class="highlight-cpp notranslate" id="ipv4-socket-connect-example"><div class="highlight"><pre><span></span><span class="n">socket</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">Ipv4Address</span><span class="p">(</span><span class="s">&quot;10.0.0.42&quot;</span><span class="p">));</span> <span class="c1">// filter for remote address</span>
</pre></div>
</div>
</div>
<div class="section" id="sending-data-4">
<span id="id15"></span><h3>Sending Data<a class="headerlink" href="#sending-data-4" title="Permalink to this headline">¶</a></h3>
<p>After the socket has been configured, applications can immediately start
sending <span class="protocol">IPv4</span> datagrams to a remote address via a simple
function call:</p>
<div class="highlight-cpp notranslate" id="ipv4-socket-send-to-example"><div class="highlight"><pre><span></span><span class="n">socket</span><span class="p">.</span><span class="n">sendTo</span><span class="p">(</span><span class="n">packet</span><span class="p">,</span> <span class="n">Ipv4Address</span><span class="p">(</span><span class="s">&quot;10.0.0.42&quot;</span><span class="p">));</span> <span class="c1">// remote address</span>
</pre></div>
</div>
<p>If the application wants to send several <span class="protocol">IPv4</span> datagrams to
the same destination address, it can optionally connect to the
destination:</p>
<div class="highlight-cpp notranslate" id="ipv4-socket-send-example"><div class="highlight"><pre><span></span><span class="n">socket</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">Ipv4Address</span><span class="p">(</span><span class="s">&quot;10.0.0.42&quot;</span><span class="p">));</span> <span class="c1">// remote address</span>
<span class="n">socket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">packet1</span><span class="p">);</span>
<span class="c1">// ...</span>
<span class="n">socket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">packet42</span><span class="p">);</span>
</pre></div>
</div>
<p>The <span class="protocol">IPv4</span> protocol is in fact connectionless, so when the
<a class="reference-ned reference external" href="https://omnetpp.org/doc/inet/api-current/neddoc/inet.networklayer.ipv4.Ipv4.html">Ipv4</a> module receives the connect request, it simply remembers the
remote address, and uses it as the default destination address for later
sends.</p>
<p>The application can call <code class="code literal-cpp docutils literal notranslate"><span class="pre">connect()</span></code> several times on the same
socket.</p>
</div>
<div class="section" id="receiving-data-4">
<span id="id16"></span><h3>Receiving Data<a class="headerlink" href="#receiving-data-4" title="Permalink to this headline">¶</a></h3>
<p>For example, the application may directly implement the
<code class="code literal-cpp docutils literal notranslate"><span class="pre">Ipv4Socket::ICallback</span></code> interface and print the received data as
follows:</p>
<div class="highlight-cpp notranslate" id="ipv4-socket-receive-example"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Ipv4App</span> <span class="o">:</span> <span class="k">public</span> <span class="n">cSimpleModule</span><span class="p">,</span> <span class="k">public</span> <span class="n">Ipv4Socket</span><span class="o">::</span><span class="n">ICallback</span>
<span class="p">{</span>
    <span class="kt">void</span> <span class="n">socketDataArrived</span><span class="p">(</span><span class="n">Ipv4Socket</span> <span class="o">*</span><span class="n">socket</span><span class="p">,</span> <span class="n">Packet</span> <span class="o">*</span><span class="n">packet</span><span class="p">);</span>
<span class="p">};</span>

<span class="kt">void</span> <span class="n">Ipv4App</span><span class="o">::</span><span class="n">socketDataArrived</span><span class="p">(</span><span class="n">Ipv4Socket</span> <span class="o">*</span><span class="n">socket</span><span class="p">,</span> <span class="n">Packet</span> <span class="o">*</span><span class="n">packet</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">EV</span> <span class="o">&lt;&lt;</span> <span class="n">packet</span><span class="o">-&gt;</span><span class="n">peekData</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="ipv6-socket">
<span id="dg-sec-sockets-ipv6-socket"></span><h2>IPv6 Socket<a class="headerlink" href="#ipv6-socket" title="Permalink to this headline">¶</a></h2>
<p>The <code class="code literal-cpp docutils literal notranslate"><span class="pre">Ipv6Socket</span></code> class provides an easy to use C++ interface to
send and receive <span class="protocol">IPv6</span> datagrams. The underlying
<span class="protocol">IPv6</span> protocol is implemented in the <a class="reference-ned reference external" href="https://omnetpp.org/doc/inet/api-current/neddoc/inet.networklayer.ipv6.Ipv6.html">Ipv6</a> module.</p>
<div class="section" id="callback-interface-4">
<span id="id17"></span><h3>Callback Interface<a class="headerlink" href="#callback-interface-4" title="Permalink to this headline">¶</a></h3>
<p>Messages received from the <a class="reference-ned reference external" href="https://omnetpp.org/doc/inet/api-current/neddoc/inet.networklayer.ipv6.Ipv6.html">Ipv6</a> module must be processed by the
socket where they belong as shown in the general section. The
<code class="code literal-cpp docutils literal notranslate"><span class="pre">Ipv6Socket</span></code> deconstructs the message and uses the
<code class="code literal-cpp docutils literal notranslate"><span class="pre">Ipv6Socket::ICallback</span></code> interface to notify the application about
the received data:</p>
<div class="highlight-cpp notranslate" id="ipv6-socket-callback-interface"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ICallback</span> <span class="c1">// inner class of Ipv6Socket</span>
<span class="p">{</span>
    <span class="kt">void</span> <span class="n">socketDataArrived</span><span class="p">(</span><span class="n">Ipv6Socket</span> <span class="o">*</span><span class="n">socket</span><span class="p">,</span> <span class="n">Packet</span> <span class="o">*</span><span class="n">packet</span><span class="p">);</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
<div class="section" id="configuring-sockets-3">
<span id="id18"></span><h3>Configuring Sockets<a class="headerlink" href="#configuring-sockets-3" title="Permalink to this headline">¶</a></h3>
<p>In order to only receive <span class="protocol">IPv6</span> datagrams which are sent to a
specific local address or contain a specific protocol, the socket can be
bound to the desired local address or protocol.</p>
<p>For example, the following code fragment shows how the INET
<a class="reference-ned reference external" href="https://omnetpp.org/doc/inet/api-current/neddoc/inet.applications.pingapp.PingApp.html">PingApp</a> binds to the <span class="protocol">ICMPv6</span> protocol to receive all
incoming <span class="protocol">ICMPv6</span> Echo Reply messages:</p>
<div class="highlight-cpp notranslate" id="ipv6-socket-bind-example"><div class="highlight"><pre><span></span><span class="n">socket</span><span class="p">.</span><span class="n">bind</span><span class="p">(</span><span class="o">&amp;</span><span class="n">Protocol</span><span class="o">::</span><span class="n">icmpv6</span><span class="p">,</span> <span class="n">Ipv6Address</span><span class="p">());</span> <span class="c1">// filter for ICMPv6 messages</span>
</pre></div>
</div>
<p>For only receiving <span class="protocol">IPv6</span> datagrams from a specific remote
address, the socket can be connected to the desired remote address:</p>
<div class="highlight-cpp notranslate" id="ipv6-socket-connect-example"><div class="highlight"><pre><span></span><span class="n">socket</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">Ipv6Address</span><span class="p">(</span><span class="s">&quot;10:0:0:0:0:0:0:42&quot;</span><span class="p">));</span> <span class="c1">// filter for remote address</span>
</pre></div>
</div>
</div>
<div class="section" id="sending-data-5">
<span id="id19"></span><h3>Sending Data<a class="headerlink" href="#sending-data-5" title="Permalink to this headline">¶</a></h3>
<p>After the socket has been configured, applications can immediately start
sending <span class="protocol">IPv6</span> datagrams to a remote address via a simple
function call:</p>
<div class="highlight-cpp notranslate" id="ipv6-socket-send-at-example"><div class="highlight"><pre><span></span><span class="n">socket</span><span class="p">.</span><span class="n">sendTo</span><span class="p">(</span><span class="n">packet</span><span class="p">,</span> <span class="n">Ipv6Address</span><span class="p">(</span><span class="s">&quot;10:0:0:0:0:0:0:42&quot;</span><span class="p">));</span> <span class="c1">// remote address</span>
</pre></div>
</div>
<p>If the application wants to send several <span class="protocol">IPv6</span> datagrams to
the same destination address, it can optionally connect to the
destination:</p>
<div class="highlight-cpp notranslate" id="ipv6-socket-send-example"><div class="highlight"><pre><span></span><span class="n">socket</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">Ipv6Address</span><span class="p">(</span><span class="s">&quot;10:0:0:0:0:0:0:42&quot;</span><span class="p">));</span> <span class="c1">// remote address</span>
<span class="n">socket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">packet1</span><span class="p">);</span>
<span class="c1">// ...</span>
<span class="n">socket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">packet42</span><span class="p">);</span>
</pre></div>
</div>
<p>The <span class="protocol">IPv6</span> protocol is in fact connectionless, so when the
<a class="reference-ned reference external" href="https://omnetpp.org/doc/inet/api-current/neddoc/inet.networklayer.ipv6.Ipv6.html">Ipv6</a> module receives the connect request, it simply remembers the
remote address, and uses it as the default destination address for later
sends.</p>
<p>The application can call <code class="code literal-cpp docutils literal notranslate"><span class="pre">connect()</span></code> several times on the same
socket.</p>
</div>
<div class="section" id="receiving-data-5">
<span id="id20"></span><h3>Receiving Data<a class="headerlink" href="#receiving-data-5" title="Permalink to this headline">¶</a></h3>
<p>For example, the application may directly implement the
<code class="code literal-cpp docutils literal notranslate"><span class="pre">Ipv6Socket::ICallback</span></code> interface and print the received data as
follows:</p>
<div class="highlight-cpp notranslate" id="ipv6-socket-receive-example"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Ipv6App</span> <span class="o">:</span> <span class="k">public</span> <span class="n">cSimpleModule</span><span class="p">,</span> <span class="k">public</span> <span class="n">Ipv6Socket</span><span class="o">::</span><span class="n">ICallback</span>
<span class="p">{</span>
    <span class="kt">void</span> <span class="n">socketDataArrived</span><span class="p">(</span><span class="n">Ipv6Socket</span> <span class="o">*</span><span class="n">socket</span><span class="p">,</span> <span class="n">Packet</span> <span class="o">*</span><span class="n">packet</span><span class="p">);</span>
<span class="p">};</span>

<span class="kt">void</span> <span class="n">Ipv6App</span><span class="o">::</span><span class="n">socketDataArrived</span><span class="p">(</span><span class="n">Ipv6Socket</span> <span class="o">*</span><span class="n">socket</span><span class="p">,</span> <span class="n">Packet</span> <span class="o">*</span><span class="n">packet</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">EV</span> <span class="o">&lt;&lt;</span> <span class="n">packet</span><span class="o">-&gt;</span><span class="n">peekData</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="l3-socket">
<span id="dg-sec-sockets-l3-socket"></span><h2>L3 Socket<a class="headerlink" href="#l3-socket" title="Permalink to this headline">¶</a></h2>
<p>The <code class="code literal-cpp docutils literal notranslate"><span class="pre">L3Socket</span></code> class provides an easy to use C++ interface to send
and receive datagrams using the conceptual network protocols. The
underlying network protocols are implemented in the
<a class="reference-ned reference external" href="https://omnetpp.org/doc/inet/api-current/neddoc/inet.networklayer.nexthop.NextHopForwarding.html">NextHopForwarding</a>, <a class="reference-ned reference external" href="https://omnetpp.org/doc/inet/api-current/neddoc/inet.networklayer.flooding.Flooding.html">Flooding</a>,
<a class="reference-ned reference external" href="https://omnetpp.org/doc/inet/api-current/neddoc/inet.networklayer.probabilistic.ProbabilisticBroadcast.html">ProbabilisticBroadcast</a>, and <a class="reference-ned reference external" href="https://omnetpp.org/doc/inet/api-current/neddoc/inet.networklayer.probabilistic.AdaptiveProbabilisticBroadcast.html">AdaptiveProbabilisticBroadcast</a>
modules.</p>
<div class="section" id="callback-interface-5">
<span id="id21"></span><h3>Callback Interface<a class="headerlink" href="#callback-interface-5" title="Permalink to this headline">¶</a></h3>
<p>Messages received from the network protocol module must be processed by
the associated socket where as shown in the general section. The
<code class="code literal-cpp docutils literal notranslate"><span class="pre">L3Socket</span></code> deconstructs the message and uses the
<code class="code literal-cpp docutils literal notranslate"><span class="pre">L3Socket::ICallback</span></code> interface to notify the application about the
received data:</p>
<div class="highlight-cpp notranslate" id="l3-socket-callback-interface"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ICallback</span> <span class="c1">// inner class of L3Socket</span>
<span class="p">{</span>
    <span class="kt">void</span> <span class="n">socketDataArrived</span><span class="p">(</span><span class="n">L3Socket</span> <span class="o">*</span><span class="n">socket</span><span class="p">,</span> <span class="n">Packet</span> <span class="o">*</span><span class="n">packet</span><span class="p">);</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
<div class="section" id="configuring-sockets-4">
<span id="id22"></span><h3>Configuring Sockets<a class="headerlink" href="#configuring-sockets-4" title="Permalink to this headline">¶</a></h3>
<p>Since the <code class="code literal-cpp docutils literal notranslate"><span class="pre">L3Socket</span></code> class is network protocol agnostic, it must be
configured to connect to a desired network protocol:</p>
<div class="highlight-cpp notranslate" id="l3-socket-protocol-example"><div class="highlight"><pre><span></span><span class="n">L3Socket</span> <span class="nf">socket</span><span class="p">(</span><span class="o">&amp;</span><span class="n">Protocol</span><span class="o">::</span><span class="n">flooding</span><span class="p">);</span>
</pre></div>
</div>
<p>In order to only receive datagrams which are sent to a specific local
address or contain a specific protocol, the socket can be bound to the
desired local address or protocol. The conceptual network protocols can
work with the <code class="code literal-cpp docutils literal notranslate"><span class="pre">ModuleIdAddress</span></code> class which contains a
<code class="code literal-cpp docutils literal notranslate"><span class="pre">moduleId</span></code> of the desired network interface.</p>
<p>For example, the following code fragment shows how the INET
<a class="reference-ned reference external" href="https://omnetpp.org/doc/inet/api-current/neddoc/inet.applications.pingapp.PingApp.html">PingApp</a> binds to the <span class="protocol">Echo</span> protocol to receive all
incoming <span class="protocol">Echo</span> Reply messages:</p>
<div class="highlight-cpp notranslate" id="l3-socket-bind-example"><div class="highlight"><pre><span></span><span class="n">socket</span><span class="p">.</span><span class="n">bind</span><span class="p">(</span><span class="o">&amp;</span><span class="n">Protocol</span><span class="o">::</span><span class="n">echo</span><span class="p">,</span> <span class="n">ModuleIdAddress</span><span class="p">(</span><span class="mi">42</span><span class="p">));</span>
</pre></div>
</div>
<p>For only receiving datagrams from a specific remote address, the socket
can be connected to the desired remote address:</p>
<div class="highlight-cpp notranslate" id="l3-socket-connect-example"><div class="highlight"><pre><span></span><span class="n">socket</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">ModuleIdAddress</span><span class="p">(</span><span class="mi">42</span><span class="p">));</span> <span class="c1">// filter for remote interface</span>
</pre></div>
</div>
</div>
<div class="section" id="sending-data-6">
<span id="id23"></span><h3>Sending Data<a class="headerlink" href="#sending-data-6" title="Permalink to this headline">¶</a></h3>
<p>After the socket has been configured, applications can immediately start
sending datagrams to a remote address via a simple function call:</p>
<div class="highlight-cpp notranslate" id="l3-socket-send-to-example"><div class="highlight"><pre><span></span><span class="n">socket</span><span class="p">.</span><span class="n">sendTo</span><span class="p">(</span><span class="n">packet</span><span class="p">,</span> <span class="n">ModuleIdAddress</span><span class="p">(</span><span class="mi">42</span><span class="p">));</span> <span class="c1">// remote interface</span>
</pre></div>
</div>
<p>If the application wants to send several datagrams to the same
destination address, it can optionally connect to the destination:</p>
<div class="highlight-cpp notranslate" id="l3-socket-send-example"><div class="highlight"><pre><span></span><span class="n">socket</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">ModuleIdAddress</span><span class="p">(</span><span class="mi">42</span><span class="p">));</span> <span class="c1">// remote interface</span>
<span class="n">socket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">packet1</span><span class="p">);</span>
<span class="c1">//..</span>
<span class="n">socket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">packet42</span><span class="p">);</span>
</pre></div>
</div>
<p>The network protocols are in fact connectionless, so when the protocol
module receives the connect request, it simply remembers the remote
address, and uses it as the default destination address for later sends.</p>
<p>The application can call <code class="code literal-cpp docutils literal notranslate"><span class="pre">connect()</span></code> several times on the same
socket.</p>
</div>
<div class="section" id="receiving-data-6">
<span id="id24"></span><h3>Receiving Data<a class="headerlink" href="#receiving-data-6" title="Permalink to this headline">¶</a></h3>
<p>For example, the application may directly implement the
<code class="code literal-cpp docutils literal notranslate"><span class="pre">L3Socket::ICallback</span></code> interface and print the received data as
follows:</p>
<div class="highlight-cpp notranslate" id="l3-socket-receive-example"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">L3App</span> <span class="o">:</span> <span class="k">public</span> <span class="n">cSimpleModule</span><span class="p">,</span> <span class="k">public</span> <span class="n">L3Socket</span><span class="o">::</span><span class="n">ICallback</span>
<span class="p">{</span>
    <span class="kt">void</span> <span class="n">socketDataArrived</span><span class="p">(</span><span class="n">L3Socket</span> <span class="o">*</span><span class="n">socket</span><span class="p">,</span> <span class="n">Packet</span> <span class="o">*</span><span class="n">packet</span><span class="p">);</span>
<span class="p">};</span>

<span class="kt">void</span> <span class="n">L3App</span><span class="o">::</span><span class="n">socketDataArrived</span><span class="p">(</span><span class="n">L3Socket</span> <span class="o">*</span><span class="n">socket</span><span class="p">,</span> <span class="n">Packet</span> <span class="o">*</span><span class="n">packet</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">EV</span> <span class="o">&lt;&lt;</span> <span class="n">packet</span><span class="o">-&gt;</span><span class="n">peekData</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="tun-socket">
<span id="dg-sec-sockets-tun-socket"></span><h2>TUN Socket<a class="headerlink" href="#tun-socket" title="Permalink to this headline">¶</a></h2>
<p>The <code class="code literal-cpp docutils literal notranslate"><span class="pre">TunSocket</span></code> class provides an easy to use C++ interface to send
and receive datagrams using a <span class="protocol">TUN</span> interface. The underlying
<span class="protocol">TUN</span> interface is implemented in the <a class="reference-ned reference external" href="https://omnetpp.org/doc/inet/api-current/neddoc/inet.linklayer.tun.Tun.html">Tun</a> module.</p>
<p>A <span class="protocol">TUN</span> interface is basically a virtual network interface
which is usually connected to an application (from the outside) instead
of other network devices. It can be used for many networking tasks such
as tunneling, or virtual private networking.</p>
<div class="section" id="callback-interface-6">
<span id="id25"></span><h3>Callback Interface<a class="headerlink" href="#callback-interface-6" title="Permalink to this headline">¶</a></h3>
<p>Messages received from the <a class="reference-ned reference external" href="https://omnetpp.org/doc/inet/api-current/neddoc/inet.linklayer.tun.Tun.html">Tun</a> module must be processed by the
socket where they belong as shown in the general section. The
<code class="code literal-cpp docutils literal notranslate"><span class="pre">TunSocket</span></code> deconstructs the message and uses the
<code class="code literal-cpp docutils literal notranslate"><span class="pre">TunSocket::ICallback</span></code> interface to notify the application about
the received data:</p>
<div class="highlight-cpp notranslate" id="tun-socket-callback-interface"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ICallback</span> <span class="c1">// inner class of TunSocket</span>
<span class="p">{</span>
    <span class="kt">void</span> <span class="n">socketDataArrived</span><span class="p">(</span><span class="n">TunSocket</span> <span class="o">*</span><span class="n">socket</span><span class="p">,</span> <span class="n">Packet</span> <span class="o">*</span><span class="n">packet</span><span class="p">);</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
<div class="section" id="configuring-sockets-5">
<span id="id26"></span><h3>Configuring Sockets<a class="headerlink" href="#configuring-sockets-5" title="Permalink to this headline">¶</a></h3>
<p>A <code class="code literal-cpp docutils literal notranslate"><span class="pre">TunSocket</span></code> must be associated with a <span class="protocol">TUN</span> interface
before it can be used:</p>
<div class="highlight-cpp notranslate" id="tun-socket-open-example"><div class="highlight"><pre><span></span><span class="n">socket</span><span class="p">.</span><span class="n">open</span><span class="p">(</span><span class="n">interface</span><span class="o">-&gt;</span><span class="n">getId</span><span class="p">());</span>
</pre></div>
</div>
</div>
<div class="section" id="sending-packets">
<h3>Sending Packets<a class="headerlink" href="#sending-packets" title="Permalink to this headline">¶</a></h3>
<p>As soon as the <code class="code literal-cpp docutils literal notranslate"><span class="pre">TunSocket</span></code> is associated with a <span class="protocol">TUN</span>
interface, applications can immediately start sending datagrams via a
simple function call:</p>
<div class="highlight-cpp notranslate" id="tun-socket-send-example"><div class="highlight"><pre><span></span><span class="n">socket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">packet</span><span class="p">);</span>
</pre></div>
</div>
<p>When the application sends a datagram to a <code class="code literal-cpp docutils literal notranslate"><span class="pre">TunSocket</span></code>, the packet
appears for the protocol stack within the network node as if the packet
were received from the network.</p>
</div>
<div class="section" id="receiving-packets">
<h3>Receiving Packets<a class="headerlink" href="#receiving-packets" title="Permalink to this headline">¶</a></h3>
<p>Messages received from the <span class="protocol">TUN</span> interface must be processed
by the corresponding <code class="code literal-cpp docutils literal notranslate"><span class="pre">TunSocket</span></code>. The <code class="code literal-cpp docutils literal notranslate"><span class="pre">TunSocket</span></code> deconstructs
the message and uses the <code class="code literal-cpp docutils literal notranslate"><span class="pre">TunSocket::ICallback</span></code> interface to notify
the application about the received data:</p>
<div class="highlight-cpp notranslate" id="tun-socket-receive-example"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">TunApp</span> <span class="o">:</span> <span class="k">public</span> <span class="n">cSimpleModule</span><span class="p">,</span> <span class="k">public</span> <span class="n">TunSocket</span><span class="o">::</span><span class="n">ICallback</span>
<span class="p">{</span>
    <span class="kt">void</span> <span class="n">socketDataArrived</span><span class="p">(</span><span class="n">TunSocket</span> <span class="o">*</span><span class="n">socket</span><span class="p">,</span> <span class="n">Packet</span> <span class="o">*</span><span class="n">packet</span><span class="p">);</span>
<span class="p">};</span>

<span class="kt">void</span> <span class="n">TunApp</span><span class="o">::</span><span class="n">socketDataArrived</span><span class="p">(</span><span class="n">TunSocket</span> <span class="o">*</span><span class="n">socket</span><span class="p">,</span> <span class="n">Packet</span> <span class="o">*</span><span class="n">packet</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">EV</span> <span class="o">&lt;&lt;</span> <span class="n">packet</span><span class="o">-&gt;</span><span class="n">peekData</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>When the protocol stack within the network node sends a datagram to a
<span class="protocol">TUN</span> interface, the packet appears for the application which
uses a <code class="code literal-cpp docutils literal notranslate"><span class="pre">TunSocket</span></code> as if the packet were sent to the network.</p>
</div>
</div>
</div>


        </div>
        <div class="side-doc-outline">
            <div class="side-doc-outline--content"> 
<div class="localtoc">
    <p class="caption">
      <span class="caption-text">Table Of Contents</span>
    </p>
    <ul>
<li><a class="reference internal" href="#">Using Sockets</a><ul>
<li><a class="reference internal" href="#overview">Overview</a><ul>
<li><a class="reference internal" href="#socket-interfaces">Socket Interfaces</a></li>
<li><a class="reference internal" href="#identifying-sockets">Identifying Sockets</a></li>
<li><a class="reference internal" href="#configuring-sockets">Configuring Sockets</a></li>
<li><a class="reference internal" href="#callback-interfaces">Callback Interfaces</a></li>
<li><a class="reference internal" href="#processing-messages">Processing Messages</a></li>
<li><a class="reference internal" href="#sending-data">Sending Data</a></li>
<li><a class="reference internal" href="#receiving-data">Receiving Data</a></li>
<li><a class="reference internal" href="#closing-sockets">Closing Sockets</a></li>
<li><a class="reference internal" href="#using-multiple-sockets">Using Multiple Sockets</a></li>
</ul>
</li>
<li><a class="reference internal" href="#udp-socket">UDP Socket</a><ul>
<li><a class="reference internal" href="#callback-interface">Callback Interface</a></li>
<li><a class="reference internal" href="#configuring-sockets-1">Configuring Sockets</a></li>
<li><a class="reference internal" href="#sending-data-1">Sending Data</a></li>
<li><a class="reference internal" href="#receiving-data-1">Receiving Data</a></li>
</ul>
</li>
<li><a class="reference internal" href="#tcp-socket">TCP Socket</a><ul>
<li><a class="reference internal" href="#callback-interface-1">Callback Interface</a></li>
<li><a class="reference internal" href="#configuring-connections">Configuring Connections</a></li>
<li><a class="reference internal" href="#setting-up-connections">Setting up Connections</a></li>
<li><a class="reference internal" href="#accepting-connections">Accepting Connections</a></li>
<li><a class="reference internal" href="#sending-data-2">Sending Data</a></li>
<li><a class="reference internal" href="#receiving-data-2">Receiving Data</a></li>
</ul>
</li>
<li><a class="reference internal" href="#sctp-socket">SCTP Socket</a><ul>
<li><a class="reference internal" href="#callback-interface-2">Callback Interface</a></li>
<li><a class="reference internal" href="#configuring-connections-1">Configuring Connections</a></li>
<li><a class="reference internal" href="#setting-up-connections-1">Setting up Connections</a></li>
<li><a class="reference internal" href="#accepting-connections-1">Accepting Connections</a></li>
<li><a class="reference internal" href="#sending-data-3">Sending Data</a></li>
<li><a class="reference internal" href="#receiving-data-3">Receiving Data</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ipv4-socket">IPv4 Socket</a><ul>
<li><a class="reference internal" href="#callback-interface-3">Callback Interface</a></li>
<li><a class="reference internal" href="#configuring-sockets-2">Configuring Sockets</a></li>
<li><a class="reference internal" href="#sending-data-4">Sending Data</a></li>
<li><a class="reference internal" href="#receiving-data-4">Receiving Data</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ipv6-socket">IPv6 Socket</a><ul>
<li><a class="reference internal" href="#callback-interface-4">Callback Interface</a></li>
<li><a class="reference internal" href="#configuring-sockets-3">Configuring Sockets</a></li>
<li><a class="reference internal" href="#sending-data-5">Sending Data</a></li>
<li><a class="reference internal" href="#receiving-data-5">Receiving Data</a></li>
</ul>
</li>
<li><a class="reference internal" href="#l3-socket">L3 Socket</a><ul>
<li><a class="reference internal" href="#callback-interface-5">Callback Interface</a></li>
<li><a class="reference internal" href="#configuring-sockets-4">Configuring Sockets</a></li>
<li><a class="reference internal" href="#sending-data-6">Sending Data</a></li>
<li><a class="reference internal" href="#receiving-data-6">Receiving Data</a></li>
</ul>
</li>
<li><a class="reference internal" href="#tun-socket">TUN Socket</a><ul>
<li><a class="reference internal" href="#callback-interface-6">Callback Interface</a></li>
<li><a class="reference internal" href="#configuring-sockets-5">Configuring Sockets</a></li>
<li><a class="reference internal" href="#sending-packets">Sending Packets</a></li>
<li><a class="reference internal" href="#receiving-packets">Receiving Packets</a></li>
</ul>
</li>
</ul>
</li>
</ul>

</div>
            </div>
        </div>

      <div class="clearer"></div>
    </div><div class="pagenation">
     <a id="button-prev" href="ch-packets.html" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--colored" role="botton" accesskey="P">
         <i class="pagenation-arrow-L material-icons">arrow_back</i>
         <div class="pagenation-text">
            <span class="pagenation-direction">Previous</span>
            <div>Working with Packets</div>
         </div>
     </a>
     <a id="button-next" href="ch-testing.html" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--colored" role="botton" accesskey="N">
        <i class="pagenation-arrow-R material-icons">arrow_forward</i>
        <div class="pagenation-text">
            <span class="pagenation-direction">Next</span>
            <div>Testing</div>
        </div>
     </a>
  </div>
        
        </main>
    </div>
  </body>
</html>