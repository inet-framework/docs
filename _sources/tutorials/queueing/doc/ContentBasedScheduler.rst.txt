Content-Based Scheduler
=======================

The :ned:`ContentBasedScheduler` pops packets from the connected passive packet sources
based on the configured packet filter and packet data filter functions.
The scheduler iterates over the packet filter expressions, and the packets offered by each
connected packet source, and chooses the first matching packet to pop.
It inherently prioritizes earlier expressions and earlier input gates.

In this example network, packets are generated by two passive packet sources (:ned:`PassivePacketSource`).
An active packet sink (:ned:`ActivePacketSink`)
pops packets from the scheduler, which pops packets from one of the packet sources.

.. The packets are popped by a :ned:`ContentBasedScheduler`, which is connected to an active
   packet sink (:ned:`ActivePacketSink`).

The providers generate packets in random intervals from 0 to 2 seconds, randomly containing
either 0 or 1 as data; the collector pops
a packet from the scheduler every second. The scheduler's packet data filter is configured
to first match packets containing 1, then those containing 0.

.. ----------------------

   The providers generate packets in random intervals from 0 to 2 seconds, randomly containing
   either 0 or 1 as data; the collector pops
   a packet from the scheduler every second. The scheduler's packet data filter is configured
   to send packets with 0 as data to output 0, and those with 1 as data to output 1.
   TODO

   The scheduler's first packet data filter matches packets containing 1; the second
   filter matches those containing 0. The scheduler chooses the first matching packet offered
   by the connected providers. AND ALSO THE FIRST MATCHING EXPRESSION

.. figure:: media/ContentBasedScheduler.png
   :width: 80%
   :align: center

.. literalinclude:: ../QueueingTutorial.ned
   :start-at: network ContentBasedSchedulerTutorialStep
   :end-before: //----
   :language: ned

.. literalinclude:: ../omnetpp.ini
   :start-at: Config ContentBasedScheduler
   :end-at: packetDataFilters
   :language: ini
